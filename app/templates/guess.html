<!DOCTYPE html>
<html>
<head>
    <title>Guess the Favicon</title>
</head>
<body>
    <h1>Guess the Outlet</h1>

    <!-- Show flashed messages (e.g. from article submission) -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul class="flashes">
        {% for message in messages %}
          <li><strong>{{ message }}</strong></li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <!-- Show in-game feedback (e.g. "Wrong guess") -->
    {% if message %}
        <p><strong>{{ message|safe }}</strong></p>
    {% endif %}

    <p>You have {{ remaining_guesses }} guesses remaining.</p>


    {% if favicon_url %}
        <img src="{{ url_for('static', filename='favicons/' ~ favicon_url) }}" alt="Outlet Favicon" style="height: 64px;">
    {% endif %}

    <form method="POST">
        <!-- Hidden outlet_id -->
        <input type="hidden" name="outlet_id" value="{{ outlet_id }}">
        
        <label>Guessed Name:</label><br>
        <input type="text" name="guessed_name" required><br><br>

        <label>Guessed Bias (1–5):</label><br>
        <input type="number" name="guessed_bias" min="1" max="5" required><br><br>

        <label>Guessed Establishment (1–5):</label><br>
        <input type="number" name="guessed_establishment" min="1" max="5" required><br><br>

        <input type="submit" value="Submit Guess">
    </form>

    <hr>
    <h3>Out of attempts?</h3>
    <p>Submit a unique article URL to earn more guesses:</p>
    <form method="POST" action="{{ url_for('main.submit_article') }}">
        <input type="url" name="url" placeholder="https://example.com/article" required>
        <button type="submit">Submit Article</button>
    </form>

    <p><a href="{{ url_for('main.reset_guesses', outlet_id=outlet_id) }}">Reset guesses for this favicon</a></p>
    <p><a href="{{ url_for('main.index') }}">Back to favicon menu</a></p>
</body>
</html>